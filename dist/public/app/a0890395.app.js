"use strict";angular.module("cheapTodayApp",["ngCookies","ngResource","ngSanitize","ui.router"]).config(["$stateProvider","$urlRouterProvider","$locationProvider",function(a,b,c){b.otherwise("/"),c.html5Mode(!0)}]),angular.module("cheapTodayApp").controller("GoodsCtrl",["$scope","$filter","goods",function(a,b,c){function d(a){var b,c=[];for(b=0;a>b;b+=1)c.push(b);return c}function e(a){var b=new Date;b.setDate(b.getDate()+1),localStorage.setItem("ctGoods",JSON.stringify(a)),localStorage.setItem("ctExpires",JSON.stringify(b))}function f(){return new Date(JSON.parse(localStorage.getItem("ctExpires")))>new Date?JSON.parse(localStorage.getItem("ctGoods")):null}function g(){var a=f();a&&0!==a.length?h(a):c.findGoods().then(function(a){h(a),e(a)})}function h(b){a.filteredGoods=b,a.allGoods=b,a.setPages()}a.filteredGoods=[],a.allGoods=[],a.currentPage=0,a.itemsPerPage=20,a.setPages=function(){a.pages=d(Math.ceil(a.filteredGoods.length/a.itemsPerPage))},a.setCurrentPage=function(b){a.currentPage=b},a.findGoods=function(c){a.filteredGoods=b("filter")(a.allGoods,c,!1),a.setCurrentPage(0),a.setPages()},g()}]),angular.module("cheapTodayApp").config(["$stateProvider",function(a){a.state("goods",{url:"/goods",templateUrl:"app/goods/goods.html",controller:"GoodsCtrl"})}]),angular.module("cheapTodayApp").service("goods",["$q","$http",function(a,b){return{findGoods:function(){var c=a.defer();return b.get("/api/goods/").success(function(a){c.resolve(a)}).error(function(a){c.reject(a)}),c.promise}}}]),angular.module("cheapTodayApp").controller("MainCtrl",["$scope","$http",function(a,b){a.awesomeThings=[],b.get("/api/things").success(function(b){a.awesomeThings=b})}]),angular.module("cheapTodayApp").config(["$stateProvider",function(a){a.state("main",{url:"/",templateUrl:"app/main/main.html",controller:"MainCtrl"})}]),angular.module("cheapTodayApp").controller("NavbarCtrl",["$scope","$location",function(a,b){a.menu=[],a.isActive=function(a){return a===b.path()}}]),angular.module("cheapTodayApp").filter("pagination",function(){return function(a,b){return a?(b=+b,a.slice(b)):[]}}),angular.module("cheapTodayApp").run(["$templateCache",function(a){a.put("app/goods/goods.html",'<div ng-include="\'components/navbar/navbar.html\'"></div><div class="container full-width-container"><div class=content><input class=goods-search placeholder="Знайдено {{filteredGoods.length}} товарів" ng-model=searchText ng-change=findGoods(searchText)><h4 ng-if="filteredGoods.length === 0 && allGoods.length === 0" class=goods-msg>Зачекайте поки триває пошук...<br><img src=../assets/loader.gif alt=loader></h4><h4 ng-if="filteredGoods.length === 0 && allGoods.length > 0" class=goods-msg>Товар не знайдено</h4><ul ng-if="filteredGoods.length !== 0" class=goods><li ng-repeat="g in filteredGoods | orderBy:\'title\' | pagination: currentPage * itemsPerPage | limitTo:itemsPerPage">{{g.title}}<div style="background-image: url({{g.img}})"></div><img ng-src=../assets/images/{{g.store}}.png alt={{g.store}}><strong>{{g.price | currency:"&#8372;"}}</strong> <a class=button ng-href={{g.link}} target=_blank>Детальніше</a></li></ul><ul class=goods-paging><li ng-repeat="p in pages" ng-click=setCurrentPage(p) ng-class="{current:currentPage===p}">{{p+1}}</li></ul></div></div><div ng-include="\'components/footer/footer.html\'"></div>'),a.put("app/main/main.html",'<div ng-include="\'components/navbar/navbar.html\'"></div><header class="section main-page"><div class=container><h2 class="section-heading main-page-heading">Cheap Today</h2><p class=section-description>Шукайте акційні товари серед найбільших Інтернет-магазинів України</p><a class="button button-primary" href=/goods>Знайти акційний товар</a></div></header><div ng-include="\'components/footer/footer.html\'"></div>'),a.put("components/footer/footer.html","<footer class=footer><div class=container><p>Cheap Today v.1 | June 2015 | <a href=mailto:julia.nesteruk@gmail.com>Julia N.</a></p></div></footer>"),a.put("components/navbar/navbar.html",'<nav class="container navbar" ng-controller=NavbarCtrl><div class=row><div class="three columns"><a href="/" title="Cheap Today" class=navbar-brand><img src=../../assets/logo.png alt="Cheap Today" height=35></a></div><!--<div class="nine columns">\n      <ul class="navbar-list" ng-if="menu.length > 0">\n        <li ng-repeat="item in menu" class="navbar-link" ng-class="{active: isActive(item.link)}">\n          <a ng-href="{{item.link}}">{{item.title}}</a>\n        </li>\n      </ul>\n    </div>--></div></nav>')}]);